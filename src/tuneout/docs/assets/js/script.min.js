const server="http://127.0.0.1:5000",card=$(".response-card").clone().removeClass("visually-hidden");async function share(){reset();var e=$("#music-link").val();if(e.length){try{var r=new URL(e).hostname}catch(e){return $(".alert-message").text("Error: Invalid URL"),void $(".alert").removeClass("visually-hidden")}if(!r.length)return $(".alert-message").text("Error: Invalid URL"),void $(".alert").removeClass("visually-hidden");var n=await get_links(r,e);if(n.hasOwnProperty("Error"))return $(".alert-message").text(n.Error),void $(".alert").removeClass("visually-hidden");null!=n.image&&$("body").attr("style",`background: url(${n.image}) top / auto, linear-gradient(0deg, #00000088 30%, #ffffff44 100%)`);var a=card.clone();for(let e of["artist","album","track"])null!=n[e]&&$(a).find(`.music-${e}`).text(n[e]);for(let e of Object.keys(n.links))null!=n.links[e]&&(console.log(n.links[e]),$(a).find(`.${e}`).attr("href",n.links[e]),$(a).find(`.${e}`).removeClass("visually-hidden"));$(".animated").stop(!0),$(".response-card").remove(),$(".row").append(a),$(".card").css("background","rgba(28, 32, 60, 0.85)")}else $("#music-link").focus()}function get_links(e,r){return fetch(server+"/music",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({domain:e,url:r})}).then((e=>e.json()))}function reset(){$(".alert").addClass("visually-hidden"),$(".response-card").remove()}$(document).ready((function e(){let r=parseInt($(".animated").css("background-position-x"));r+=5e3,$(".animated").animate({"background-position-x":r},2e4,"linear",e)})),$("#music-link").on("keyup",(function(e){"Enter"==e.key&&share()}));