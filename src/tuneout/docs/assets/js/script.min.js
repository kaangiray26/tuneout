const server="http://127.0.0.1:5000",card=$(".response-card").clone().removeClass("visually-hidden");async function share(){reset();var e=$("#music-link").val();if(e.length){try{var a=new URL(e).hostname}catch(e){return $(".alert-message").text("Error: Invalid URL"),void $(".alert").removeClass("visually-hidden")}if(!a.length)return $(".alert-message").text("Error: Invalid URL"),void $(".alert").removeClass("visually-hidden");var r=await analyze_url(a,e);if(r.hasOwnProperty("Error"))return $(".alert-message").text(r.Error),void $(".alert").removeClass("visually-hidden");var n=card.clone();for(let e of["artist","album","track"])console.log(e),null!=r[e]&&$(n).find(`.music-${e}`).text(r[e]);null!=r.image&&$("body").attr("style",`background: url(${r.image}) top / auto, linear-gradient(0deg, #00000088 30%, #ffffff44 100%)`),$(".animated").stop(!0),$(".row").css("height","unset"),$(".response-card").remove(),$(".row").append(n),$(".card").css("background","rgba(28, 32, 60, 0.5)"),console.log(r)}else $("#music-link").focus()}function analyze_url(e,a){return fetch(server+"/music",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({domain:e,url:a})}).then((e=>e.json()))}function reset(){$(".alert").addClass("visually-hidden"),$("#response").addClass("visually-hidden"),$(".card").css("background","rgba(28, 32, 60, 1)")}$(document).ready((function e(){let a=parseInt($(".animated").css("background-position-x"));a+=5e3,$(".animated").animate({"background-position-x":a},2e4,"linear",e)})),$("#music-link").on("keyup",(function(e){"Enter"==e.key&&share()}));